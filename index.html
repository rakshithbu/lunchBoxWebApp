<!doctype html>
<html lang="en">
  <head>
  	<title>Sidebar 01</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/style.css">
  </head>
  <style>
      table {
          font-family: arial, sans-serif;
          border-collapse: collapse;
          width: 100%;
      }

      td, th {
          border: 1px solid #dddddd;
          text-align: left;
          padding: 8px;
      }

      tr:nth-child(even) {
          background-color: #dddddd;
      }
  </style>
  <body>
		
		<div class="wrapper d-flex align-items-stretch">
			<nav id="sidebar">
				<div class="p-4 pt-5">
	        <ul class="list-unstyled components mb-5">
	          <li class="active">
	            <a href="#homeSubmenu" data-toggle="collapse">Menu List</a>
	          </li>
	          <li>
	              <a href="#">Add new Item</a>
	          </li>
	          <li>
              <a href="#">Active orders</a>
	          </li>
	          <li>
              <a href="#">All Orders</a>
	          </li>
	        </ul>
	      </div>
    	</nav>

        <!-- Page Content  -->
      <div id="content" class="p-4 p-md-5">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="container-fluid">

            <button type="button" id="sidebarCollapse" class="btn btn-primary">
              <i class="fa fa-bars"></i>
              <span class="sr-only">Toggle Menu</span>
            </button>
            <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars"></i>
            </button>
          </div>
        </nav>

        <h2 class="mb-4">Menu List</h2>
          <form>
              <div class="form-group">
                  <label>Product Name</label>
                  <input type="email" class="form-control" >
              </div>
                  <div class="form-group">
                      <label>Select image</label>
                      <input type="file" class="form-control-file" id="fileUpload"  accept="image/x-png,image/gif,image/jpeg" onchange="readFile(this)">
                      <p id="b64" style="display:none;"></p>
                  </div>

              <div class="form-group">
                  <button class="btn btn-primary" type="button" onclick="uploadFile()">Button</button>
              </div>

          </form>
      </div>
		</div>

    <script src="js/jquery.min.js"></script>
    <script src="js/popper.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
  <script>

      var ws = new WebSocket("ws://localhost:8080/ws/LunchBox");

      ws.onopen = function() {
          // Web Socket is connected, send data using send()
          ws.send("Message to send");
          alert("Message is sent...");
      };

      ws.onmessage = function (evt) {
          var received_msg = evt.data;
          alert("Message is received...");
      };

      ws.onclose = function() {
          // websocket is closed.
          alert("Connection is closed...");
      };

      function readFile(that) {
          console.log("here")
          if (that.files && that.files[0]) {

              var FR= new FileReader();

              FR.addEventListener("load", function(e) {
                 $("#b64").val(e.target.result)
                  console.log( $("#b64").val())
              });

              FR.readAsDataURL( that.files[0] );
          }
      }

      function uploadFile(){

          let file = $("#fileUpload")[0].files[0];
          var obj ={};
          obj.action="fileUpload"
          obj.fileName = file.name;
          obj.fileString = $("#b64").val();

          ws.send(JSON.stringify(obj));
      }

  </script>
  </body>
</html>